[gd_scene load_steps=38 format=3 uid="uid://bjuskxpwiqy6g"]

[ext_resource type="Script" uid="uid://vq7oo3q2ebbp" path="res://scripts/Dungeon Generator/DungeonGenerator.gd" id="1_glv2v"]
[ext_resource type="Script" uid="uid://bg26mqenifput" path="res://scripts/Game/UI/debug.gd" id="1_uu6xs"]
[ext_resource type="Script" uid="uid://t3wifm7bmi8j" path="res://scripts/Dungeon/Dungeon.gd" id="2_cm0pq"]
[ext_resource type="Script" uid="uid://jkfgyvsrxoxy" path="res://scripts/Dungeon/DungeonGeneratorList.gd" id="3_3dxm6"]
[ext_resource type="Script" uid="uid://bufm6v3jqt5g2" path="res://scripts/Dungeon/layout puller/LayoutConstructor.gd" id="4_fos0i"]
[ext_resource type="Script" uid="uid://b884d07tbda08" path="res://scripts/Dungeon/collectable generator/CollectableGenerator.gd" id="6_lgr22"]
[ext_resource type="Script" uid="uid://b2qt8jgchbvs0" path="res://scripts/Collectable Resources/Ability.gd" id="7_03owx"]
[ext_resource type="Resource" uid="uid://bnsyypm8rpbqe" path="res://resources/abilitys/Dash.tres" id="8_wkp8b"]
[ext_resource type="Script" uid="uid://cs7ghvm3aqnpo" path="res://scripts/Collectable Resources/CollectableItem.gd" id="9_20pc6"]
[ext_resource type="Resource" uid="uid://dai661t28bv57" path="res://resources/items/MagicMap.tres" id="10_5vvyt"]
[ext_resource type="Script" uid="uid://cl7una4abykvr" path="res://scripts/Collectable Resources/Upgrade.gd" id="11_3b0ty"]
[ext_resource type="Script" uid="uid://dvkle5mcninea" path="res://scripts/Dungeon/Renderer/FloorRenderer.gd" id="11_20pc6"]
[ext_resource type="Script" uid="uid://ejxiof5nsyeo" path="res://scripts/Collectable Resources/Treasure.gd" id="11_sc1dx"]
[ext_resource type="Resource" uid="uid://dpv6slsnv8crq" path="res://resources/upgrades/HealthUpgrade.tres" id="12_bg4s2"]
[ext_resource type="Resource" uid="uid://ddw7en3vp7loa" path="res://resources/treasures/EarlyGame/Bent Spoon.tres" id="12_kjvhd"]
[ext_resource type="Resource" uid="uid://cinhr3xen1o2o" path="res://resources/treasures/EarlyGame/CrackedGoblet.tres" id="13_5tuhn"]
[ext_resource type="Resource" uid="uid://tcxpyh15qjbi" path="res://resources/treasures/EarlyGame/Empty Coin Poutch.tres" id="14_2gh4u"]
[ext_resource type="Resource" uid="uid://d16p3bru0su5r" path="res://resources/treasures/EarlyGame/Bent Dungeon Key.tres" id="14_hhcpw"]
[ext_resource type="Resource" uid="uid://caul567rylaym" path="res://resources/treasures/EarlyGame/Rusty Gear Cog.tres" id="15_devvj"]
[ext_resource type="Resource" uid="uid://c6h3sn7quvqc" path="res://resources/treasures/EarlyGame/Worn Boot (Left).tres" id="16_3b0ty"]
[ext_resource type="Resource" uid="uid://wkddfqa7to3a" path="res://resources/treasures/EarlyGame/Brocken Music Box.tres" id="16_mxvw5"]
[ext_resource type="Resource" uid="uid://cjcncm6led851" path="res://resources/treasures/BlockOfGold.tres" id="21_xrxkg"]
[ext_resource type="PackedScene" uid="uid://deemxnrt76muf" path="res://scenen/Prefabs/Door.tscn" id="23_mxvw5"]
[ext_resource type="Script" uid="uid://bwedbri8kx04r" path="res://scripts/Game/Objects/camera_2d.gd" id="24_hhcpw"]
[ext_resource type="PackedScene" uid="uid://cqmn4i7j1bngq" path="res://scenen/Prefabs/chest.tscn" id="24_sqvbp"]
[ext_resource type="PackedScene" uid="uid://3nfondhyuo05" path="res://scenen/Prefabs/stairs.tscn" id="25_hri7i"]
[ext_resource type="Script" uid="uid://cgougq51xd1qx" path="res://scripts/Game/UI/spin_box.gd" id="26_xrxkg"]
[ext_resource type="Texture2D" uid="uid://d2ew0uubrypmk" path="res://assets/textures/WallEdge.png" id="27_5mvff"]
[ext_resource type="Texture2D" uid="uid://ctcex5mn61wnj" path="res://assets/textures/Wall.png" id="27_w3rk5"]
[ext_resource type="Texture2D" uid="uid://ccg1elhg1s3nc" path="res://assets/textures/Ground.png" id="28_5mvff"]
[ext_resource type="PackedScene" uid="uid://ccjric8mcvps6" path="res://scenen/Prefabs/player.tscn" id="29_rm16n"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_oye8v"]
texture = ExtResource("27_5mvff")
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:0/0/metadata/_better_terrain = {
0: [2],
3: [1],
4: [1],
7: [1],
8: [2],
&"symmetry": 7,
&"type": 2
}
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0/metadata/_better_terrain = {
4: [2],
7: [1],
8: [2],
&"symmetry": 7,
&"type": 2
}

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_5mvff"]
texture = ExtResource("27_w3rk5")
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:0/0/metadata/_better_terrain = {
0: [1],
3: [1],
4: [1],
7: [1],
8: [1],
&"symmetry": 7,
&"type": 1
}
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:0/0/metadata/_better_terrain = {
4: [1],
7: [1],
8: [1],
&"symmetry": 7,
&"type": 1
}
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:1/0/metadata/_better_terrain = {
0: [1],
4: [0],
8: [1],
11: [1],
12: [1],
15: [1],
&"symmetry": 7,
&"type": 1
}
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0/metadata/_better_terrain = {
0: [1],
3: [1],
4: [1],
8: [1],
11: [1],
12: [1],
15: [1],
&"symmetry": 7,
&"type": 1
}

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_40n85"]
texture = ExtResource("28_5mvff")
0:0/0 = 0
0:0/0/probability = 0.125
0:0/0/metadata/_better_terrain = {
&"type": 0
}
1:0/0 = 0
1:0/0/metadata/_better_terrain = {
&"type": 0
}
0:1/0 = 0
0:1/0/metadata/_better_terrain = {
&"type": 0
}
1:1/0 = 0
1:1/0/metadata/_better_terrain = {
&"type": 0
}

[sub_resource type="TileSet" id="TileSet_3b0ty"]
physics_layer_0/collision_layer = 1
sources/2 = SubResource("TileSetAtlasSource_5mvff")
sources/1 = SubResource("TileSetAtlasSource_oye8v")
sources/3 = SubResource("TileSetAtlasSource_40n85")
metadata/_better_terrain = {
&"decoration": ["Decoration", Color(0.411765, 0.411765, 0.411765, 1), 3, [], {
&"path": "res://addons/better-terrain/icons/Decoration.svg"
}],
&"terrains": [["Ground", Color(0.909145, 0.0301044, 0.261267, 1), 0, [], {
&"coord": Vector2i(0, 0),
&"source_id": 0
}], ["Wall", Color(0.507166, 0.71257, 0.932584, 1), 0, [], {
&"coord": Vector2i(0, 0),
&"source_id": 2
}], ["Wall Edge", Color(0.0662432, 0.0172092, 0.670652, 1), 0, [], {
&"coord": Vector2i(0, 0),
&"source_id": 1
}], ["Invisible Wall", Color(0.851563, 0.820231, 0.266113, 1), 0, [], {
&"path": ""
}]],
&"version": "0.2"
}

[sub_resource type="Gradient" id="Gradient_5mvff"]
offsets = PackedFloat32Array(0.5, 1)
colors = PackedColorArray(0, 0, 0, 0, 0, 0, 0, 0.784314)
metadata/_snap_enabled = true

[sub_resource type="GradientTexture2D" id="GradientTexture2D_oye8v"]
gradient = SubResource("Gradient_5mvff")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0, 0.504274)

[node name="Node2D" type="Node2D"]
script = ExtResource("1_uu6xs")

[node name="Dungeon" type="Node2D" parent="."]
visible = false
script = ExtResource("2_cm0pq")
metadata/_custom_type_script = "uid://t3wifm7bmi8j"

[node name="DungeonGeneratorList" type="Node2D" parent="Dungeon"]
script = ExtResource("3_3dxm6")
metadata/_custom_type_script = "uid://jkfgyvsrxoxy"

[node name="DungeonGenerator" type="Node2D" parent="Dungeon/DungeonGeneratorList"]
visible = false
script = ExtResource("1_glv2v")
metadata/_custom_type_script = "uid://vq7oo3q2ebbp"

[node name="DungeonGenerator2" type="Node2D" parent="Dungeon/DungeonGeneratorList"]
visible = false
script = ExtResource("1_glv2v")
current_seed = 1
metadata/_custom_type_script = "uid://vq7oo3q2ebbp"

[node name="DungeonGenerator3" type="Node2D" parent="Dungeon/DungeonGeneratorList"]
script = ExtResource("1_glv2v")
current_seed = 2
metadata/_custom_type_script = "uid://vq7oo3q2ebbp"

[node name="DungeonGenerator4" type="Node2D" parent="Dungeon/DungeonGeneratorList"]
visible = false
script = ExtResource("1_glv2v")
current_seed = 3
metadata/_custom_type_script = "uid://vq7oo3q2ebbp"

[node name="DungeonGenerator5" type="Node2D" parent="Dungeon/DungeonGeneratorList"]
visible = false
script = ExtResource("1_glv2v")
current_seed = 4
metadata/_custom_type_script = "uid://vq7oo3q2ebbp"

[node name="LayoutConstructor" type="Node2D" parent="Dungeon"]
script = ExtResource("4_fos0i")
metadata/_custom_type_script = "uid://bufm6v3jqt5g2"

[node name="CollectableGenerator" type="Node2D" parent="Dungeon"]
position = Vector2(0, -7)
script = ExtResource("6_lgr22")
abilitys = Array[ExtResource("7_03owx")]([ExtResource("8_wkp8b")])
items = Array[ExtResource("9_20pc6")]([ExtResource("10_5vvyt")])
upgrades = Array[ExtResource("11_3b0ty")]([ExtResource("12_bg4s2")])
treasures = Array[ExtResource("11_sc1dx")]([ExtResource("14_hhcpw"), ExtResource("12_kjvhd"), ExtResource("16_mxvw5"), ExtResource("13_5tuhn"), ExtResource("14_2gh4u"), ExtResource("15_devvj"), ExtResource("16_3b0ty"), ExtResource("21_xrxkg")])
metadata/_custom_type_script = "uid://b884d07tbda08"

[node name="FloorRenderer" type="Node2D" parent="Dungeon" node_paths=PackedStringArray("map", "camera")]
script = ExtResource("11_20pc6")
map = NodePath("../../TileMapLayer")
camera = NodePath("../../Player/Camera2D")
door = ExtResource("23_mxvw5")
chest = ExtResource("24_sqvbp")
stairs = ExtResource("25_hri7i")
metadata/_custom_type_script = "uid://dvkle5mcninea"

[node name="TileMapLayer" type="TileMapLayer" parent="."]
texture_filter = 1
tile_set = SubResource("TileSet_3b0ty")

[node name="Player" parent="." instance=ExtResource("29_rm16n")]
accel = 20.0

[node name="Camera2D" type="Camera2D" parent="Player"]
zoom = Vector2(2, 2)
limit_enabled = false
position_smoothing_enabled = true
script = ExtResource("24_hhcpw")

[node name="Background" type="CanvasLayer" parent="Player/Camera2D"]
layer = -1

[node name="ColorRect" type="ColorRect" parent="Player/Camera2D/Background"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Debug" type="CanvasLayer" parent="Player/Camera2D"]
layer = 2

[node name="SpinBox" type="SpinBox" parent="Player/Camera2D/Debug" node_paths=PackedStringArray("renderer")]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -31.0
offset_right = 86.5625
grow_vertical = 0
focus_behavior_recursive = 1
max_value = 5.0
script = ExtResource("26_xrxkg")
renderer = NodePath("../../../../Dungeon/FloorRenderer")

[node name="Overlay" type="CanvasLayer" parent="Player/Camera2D"]

[node name="TextureRect" type="TextureRect" parent="Player/Camera2D/Overlay"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_oye8v")

[connection signal="value_changed" from="Player/Camera2D/Debug/SpinBox" to="Player/Camera2D/Debug/SpinBox" method="_on_value_changed"]
